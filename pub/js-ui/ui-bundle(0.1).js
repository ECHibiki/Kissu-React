/*! For license information please see ui-bundle(0.1).js.LICENSE.txt */
!function(r){var s={};function __webpack_require__(i){if(s[i])return s[i].exports;var l=s[i]={i:i,l:!1,exports:{}};return r[i].call(l.exports,l,l.exports,__webpack_require__),l.l=!0,l.exports}__webpack_require__.m=r,__webpack_require__.c=s,__webpack_require__.d=function(r,s,i){__webpack_require__.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:i})},__webpack_require__.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__.t=function(r,s){if(1&s&&(r=__webpack_require__(r)),8&s)return r;if(4&s&&"object"==typeof r&&r&&r.__esModule)return r;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&s&&"string"!=typeof r)for(var l in r)__webpack_require__.d(i,l,function(s){return r[s]}.bind(null,l));return i},__webpack_require__.n=function(r){var s=r&&r.__esModule?function getDefault(){return r.default}:function getModuleExports(){return r};return __webpack_require__.d(s,"a",s),s},__webpack_require__.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(r,s){r.exports=React},function(r,s){r.exports=ReactDOM},function(r,s,i){"use strict";var l=this&&this.__awaiter||function(r,s,i,l){return new(i||(i=Promise))((function(c,u){function fulfilled(r){try{step(l.next(r))}catch(r){u(r)}}function rejected(r){try{step(l.throw(r))}catch(r){u(r)}}function step(r){r.done?c(r.value):function adopt(r){return r instanceof i?r:new i((function(s){s(r)}))}(r.value).then(fulfilled,rejected)}step((l=l.apply(r,s||[])).next())}))},c=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const u=c(i(0)),h=i(7),m=i(8);class Thread extends u.Component{constructor(r){super(r),this.stored_title="",this.total_posts_in_thread=0,this.total_posts_mounted=0,this.stored_title=document.title,this.setThreadPostsFetched=this.setThreadPostsFetched.bind(this),this.setThreadPostsPreFetched=this.setThreadPostsPreFetched.bind(this),this.rebuildThreadOnBool=this.rebuildThreadOnBool.bind(this),this.maintainCountOfAllPostsMounted=this.maintainCountOfAllPostsMounted.bind(this),this.highlightThreadPost=this.highlightThreadPost.bind(this),this.threadQuickReply=this.threadQuickReply.bind(this),this.getThreadJSONData=this.getThreadJSONData.bind(this),this.returnPostJSXObject=this.returnPostJSXObject.bind(this),this.defineStatePostsArray=this.defineStatePostsArray.bind(this),this.state={spaced_posts:[],error:null,expanded:!1}}highlightThreadPost(r,s){var i=[];for(var l of this.state.spaced_posts)l.props.thread_id?s==l.props.id?(r.preventDefault(),i.push(u.cloneElement(l,{highlighted:!l.props.highlighted})),history.pushState("",document.title,window.location.pathname+window.location.search)):i.push(u.cloneElement(l,{highlighted:!1})):i.push(l);this.setState({spaced_posts:i})}componentDidMount(){this.props.paged?this.setThreadPostsPreFetched(this.props.paged):this.setThreadPostsFetched()}maintainCountOfAllPostsMounted(){this.total_posts_mounted++,this.total_posts_mounted==this.total_posts_in_thread&&this.props.finishedCallBackFunction()}rebuildThreadOnBool(){this.setState({expanded:!this.state.expanded}),this.state.expanded?this.setThreadPostsPreFetched(this.props.paged):this.setThreadPostsFetched()}threadQuickReply(r){this.props.threadQuickReply(this.props.thread_id,r)}setThreadPostsPreFetched(r){var s=[];r.forEach((r,i)=>{s.push(this.returnPostJSXObject(r,i))}),this.total_posts_in_thread=s.length,this.total_posts_mounted=0,this.defineStatePostsArray(s)}setThreadPostsFetched(r=!1){return l(this,void 0,void 0,(function*(){this.getThreadJSONData(this.props.board,this.props.thread_id).then(s=>{var i=JSON.parse(s),l=[];if(i.posts.forEach((r,s)=>{s,l.push(this.returnPostJSXObject(r,s))}),this.total_posts_in_thread=l.length,this.total_posts_mounted=0,r){var c=i.posts.length-this.state.spaced_posts.length/2;0!=c&&(document.title="("+c+") "+this.stored_title)}this.defineStatePostsArray(l)}).catch(r=>{console.log(r),this.setState({error:r+"\nJSON fetch error"})})}))}getThreadJSONData(r,s){return new Promise((i,l)=>{var c=new XMLHttpRequest;c.addEventListener("load",(function(r){this.status>=300?l(this.status):i(this.response)})),c.addEventListener("error",(function(r){l(this.status)})),c.open("GET",`/${r}/res/${s}.json`),c.send()})}returnPostJSXObject(r,s){var i={hierarchy_class:0==r.resto?"op":"reply",paged:"boolean"!=typeof this.props.paged,expanded:this.state.expanded,highlighted:!1,threadReconstruct:this.rebuildThreadOnBool,threadHighlighting:this.highlightThreadPost,threadQuickReply:this.threadQuickReply,finishedCallBackFunction:this.maintainCountOfAllPostsMounted,board:this.props.board,id:r.no,op_id:0==r.resto?r.no:r.resto,key:2*s,sub:r.sub,com:r.com,email:r.email,name:r.name,capcode:r.capcode,time:r.time,sticky:r.sticky,locked:r.locked,cyclical:r.cyclical,spoiler:r.spoiler,sage:r.sage,last_modified:r.last_modified,tn_h:r.tn_h,tn_w:r.tn_w,h:r.h,w:r.w,fsize:r.fsize,filename:r.filename,ext:r.ext,tim:r.tim,embed:r.embed,md5:r.md5,bumplimit:r.bumplimit,imagelimit:r.imagelimit,cites:r.cites,omitted_posts:r.omitted_posts};return u.createElement(h.Post,Object.assign({},i))}defineStatePostsArray(r){for(var s=[],i=0;i<r.length;i++)s=[...s,r[i]],s=[...s,u.createElement("br",{key:2*(i+1)-1})];this.setState({spaced_posts:s})}render(){if(this.state.error)return u.createElement("p",null,this.state.error);var r={board:this.props.board,thread_id:this.props.thread_id,threadListUpdateSignal:this.setThreadPostsFetched};return u.createElement("div",{id:"thread_"+this.props.thread_id,className:"thread","data-board":this.props.board,"data-full-i-d":this.props.board+"."+this.props.thread_id},this.state.spaced_posts,!this.props.paged&&"true"==localStorage["auto-up"]&&u.createElement("div",{className:"bottom-page-modifiers"},u.createElement("hr",null),u.createElement(m.ThreadUpdater,Object.assign({},r))))}}s.Thread=Thread},function(r,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=i(0),c=i(1);const u=i(4),h=i(5);r.exports={renderTest:function(r){console.log("run from library - "+r),c.render(l.createElement(u.Hello,null),document.getElementById(r))},renderThread:function(r,s){console.log("qtest "+r),c.render(l.createElement(h.MainImageboardContents,{thread_id:r,board:s,paged:!1,page:0}),document.getElementById("react-ui"))},renderPage:function(r,s){console.log("ptest "+r+" "+s),c.render(l.createElement(h.MainImageboardContents,{thread_id:0,board:s,paged:!0,page:r}),document.getElementById("react-ui"))}}},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0));class Hello extends c.Component{render(){return c.createElement("h1",null,"Hello fromand!")}}s.Hello=Hello},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0)),u=i(6),h=i(12),m=i(14);class MainImageboardContents extends c.Component{constructor(r){super(r),this.time_of_last_rebuild=Date.now(),this.state={options:{},time_since_last_update:""},this.information_holder_ref=c.createRef(),this.confirmUpdateClick=this.confirmUpdateClick.bind(this),this.sendDoneEvents=this.sendDoneEvents.bind(this),this.optionSetRebuild=this.optionSetRebuild.bind(this),this.mounted=!1}componentDidMount(){}sendDoneEvents(){var r=new CustomEvent("mounted");document.body.addEventListener("mounted",(function(r){console.log(r)})),document.body.addEventListener("likely-rendered",(function(r){console.log(r)})),document.body.dispatchEvent(r),document.body.style.cursor="default",this.mounted=!0}createQuickReply(r,s){}optionSetRebuild(){this.information_holder_ref.current.triggerRebuild()}confirmUpdateClick(r,s){this.mounted&&s>this.time_of_last_rebuild/1e3&&(this.information_holder_ref.current.triggerRebuild(),this.time_of_last_rebuild=s),this.setState({time_since_last_update:r})}render(){var r={board:this.props.board,thread_id:this.props.thread_id,page:this.props.page,paged:this.props.paged,doneEventCallBack:this.sendDoneEvents};return c.createElement("div",{id:"main-imageboard-contents"},c.createElement("hr",null),c.createElement(m.NavButtons,{paged:!!this.props.paged,board:this.props.board,confirmUpdateClick:this.confirmUpdateClick,time_string:this.state.time_since_last_update}),c.createElement(h.OptionMenu,{optionSetCallBack:this.optionSetRebuild}),c.createElement("br",null),c.createElement("hr",null),c.createElement(u.DeleteForm,Object.assign({},r,{ref:this.information_holder_ref})),c.createElement(m.NavButtons,{paged:this.props.paged,board:this.props.board,confirmUpdateClick:this.confirmUpdateClick,time_string:this.state.time_since_last_update}))}}s.MainImageboardContents=MainImageboardContents},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0)),u=i(2),h=i(9),m=i(10),O=i(11);class DeleteForm extends c.Component{constructor(r){super(r),this.state={display_user_moderation_tools:!1},this.threadQuickReply=this.threadQuickReply.bind(this),this.paged_rebuild_ref=c.createRef(),this.thread_rebuild_ref=c.createRef()}threadQuickReply(r,s){console.log(r),console.log(s)}triggerRebuild(){this.props.paged?this.paged_rebuild_ref.current.setPageThreads():this.thread_rebuild_ref.current.setThreadPostsFetched()}componentDidMount(){document.body.style.cursor="wait"}render(){var r={board:this.props.board,thread_id:this.props.thread_id,paged:!1,threadQuickReply:this.threadQuickReply,finishedCallBackFunction:this.props.doneEventCallBack},s={board:this.props.board,page:this.props.page,finishedCallBackFunction:this.props.doneEventCallBack};return c.createElement("form",{id:"thread_form",name:"postcontrols",action:"/post.php",method:"post"},c.createElement("input",{type:"hidden",name:"board",value:this.props.board}),!this.props.paged&&c.createElement(u.Thread,Object.assign({},r,{ref:this.thread_rebuild_ref})),this.props.paged&&c.createElement(h.Page,Object.assign({},s,{ref:this.paged_rebuild_ref})),c.createElement("a",{style:{cursor:"pointer",float:"right"},onClick:()=>this.setState({display_user_moderation_tools:!this.state.display_user_moderation_tools})},"Toggle Moderation")," ",c.createElement("br",null),c.createElement("div",{className:"user-mod-container"},this.state.display_user_moderation_tools&&c.createElement("div",null,c.createElement(m.DeleteButton,null),c.createElement("br",null),c.createElement(O.ReportButton,null))))}}s.DeleteForm=DeleteForm},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0));class Post extends c.Component{constructor(r){super(r),this.generateProperMedia=this.generateProperMedia.bind(this),this.generateStagedEmbeding=this.generateStagedEmbeding.bind(this),this.onClickExpandImage=this.onClickExpandImage.bind(this),this.onClickExpandAudio=this.onClickExpandAudio.bind(this),this.onClickExpandVideo=this.onClickExpandVideo.bind(this),this.onClickExpandEmbed=this.onClickExpandEmbed.bind(this),this.onMediaLoad=this.onMediaLoad.bind(this),this.state={filename_cutoff:20,file_details_hidden:"false"==localStorage["file-info"],show_full_image:!1,show_full_audio:!1,show_full_video:!1,show_full_embed:!1,media_opacity:1}}componentDidMount(){this.props.finishedCallBackFunction()}onClickExpandImage(r){r.preventDefault(),this.setState({media_opacity:.8}),this.setState({show_full_image:!this.state.show_full_image})}onClickExpandAudio(r){r.preventDefault(),this.setState({media_opacity:.8}),this.setState({show_full_audio:!this.state.show_full_audio})}onClickExpandVideo(r){r.preventDefault(),this.setState({media_opacity:.8}),this.setState({show_full_video:!this.state.show_full_video})}onClickExpandEmbed(r){r.preventDefault(),this.setState({media_opacity:.8}),this.setState({show_full_embed:!this.state.show_full_embed})}onMediaLoad(){this.setState({media_opacity:1})}parsePostBodyIntoSafeJSX(r){var s={__html:(r=r.replace(/cookie/g,"c&#111;&#111;kie")).replace(/localStorage/g,"l&#111;calSt&#111;rage")};return c.createElement("div",{dangerouslySetInnerHTML:s})}shortenFileName(r){return r.length>this.state.filename_cutoff?r.substr(0,this.state.filename_cutoff)+"..":r}highlightReply(r,s){this.props.threadHighlighting(r,s)}citeReply(r){var s;this.props.threadQuickReply(r);if(!(s=null!=document.getElementById("index-body")?document.getElementById("index-body"):document.getElementById("body")))return!1;if(document.selection)s.focus(),document.selection.createRange().text=">>"+r+"\n";else if(s.selectionStart||0==s.selectionStart){var i=s.selectionStart,l=s.selectionEnd;s.value=s.value.substring(0,i)+">>"+r+"\n"+s.value.substring(l,s.value.length),s.selectionStart+=(">>"+r).length+1,s.selectionEnd=s.selectionStart}else s.value+=">>"+r+"\n";if("undefined"!=typeof $){var c=document.getSelection().toString();if(c)$("#reply_"+r+", #op_"+r).find("div.body").text().indexOf(c.replace("\n",""))>-1&&(s.value+=">"+c+"\n");$(window).trigger("cite",[r,void 0]),$(s).change()}return!1}formatFileSize(r){return r/1048576>1?(r/1048576).toFixed(2)+"MB":r/1024>1?(r/1024).toFixed(2)+"KB":r+"B"}createCapCode(r,s){switch(s){case"Admin":return c.createElement("span",{className:"admin"},c.createElement("span",{className:"admin-name"},r),c.createElement("span",{className:"admin-position"}," ## ",s," "),c.createElement("i",{className:"fas fa-kiss-wink-heart fa-lg"}));case"Mod":return c.createElement("span",{className:"mod"},c.createElement("span",{className:"mod-name"},r),c.createElement("span",{className:"mod-position"}," ## ",s," "),c.createElement("i",{className:"far fa-kiss fa-lg"}))}}parseEmailNameField(r,s,i){if(i)return this.createCapCode(s,i);if(""!=r&&r){var l=r.split("%20"),u="";for(let r of l)u+=r+" ";return c.createElement("a",{className:u,title:u,href:u,onClick:r=>{r.preventDefault()}},c.createElement("span",{className:"name"},s))}return c.createElement("span",{className:"name"},this.props.name)}readableTime(r){var s=new Date(1e3*r);return(s.getHours()+"").padStart(2,"0")+":"+(s.getMinutes()+"").padStart(2,"0")+":"+(s.getSeconds()+"").padStart(2,"0")}detailsExpander(r,s){return r||s?c.createElement("a",{className:"details-expander",style:{cursor:"pointer",textDecoration:"none"},target:"_blank",onClick:r=>{this.setState({file_details_hidden:!this.state.file_details_hidden}),r.preventDefault()}},this.state.file_details_hidden?"▼▼":"▲▲"):" "}readableDate(r){var s=new Date(1e3*r);return(s.getDate()+"").padStart(2,"0")+"/"+(s.getMonth()+"").padStart(2,"0")+"/"+(s.getFullYear()+"").substr(2)}createImageSearchLink(r,s){var i=window.location.protocol+"//"+window.location.hostname+"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,l=s.replace("%s",i);return c.createElement("a",{className:"sauce",target:"_blank",href:l},r)}createCitesList(r){var s=[],i=0;for(var l of r)l.board==this.props.board?s.push(c.createElement("span",{key:i++}," ",c.createElement("a",{href:window.location.protocol+"//"+window.location.host+"/"+this.props.board+"/res/"+l.host+"#"+l.post},">>"+l.post))):s.push(c.createElement("span",{key:i++}," ",c.createElement("a",{href:window.location.protocol+"//"+window.location.host+"/"+l.board+"/res/"+l.host+"#"+l.post},">>>/"+l.board+"/"+l.post)));return s}generateProperMedia(){var r=!1,s=!1,i=!1;switch(this.props.ext){case".jpg":case".jpeg":case".png":case".gif":r=!0;break;case".mp4":case".webm":s=!0;break;case".mp3":i=!0}if(r){if(this.state.show_full_image)return c.createElement("div",{className:"image-container"},c.createElement("a",{href:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,target:"_blank"},c.createElement("img",{onClick:this.onClickExpandImage,onLoad:this.onMediaLoad,className:"full-image",src:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,style:{opacity:this.state.media_opacity}})));var l="";return l=this.props.spoiler?"/static/kissu-spoiler.png":"/"+this.props.board+"/thumb/"+this.props.tim+".png",c.createElement("div",{className:"image-container-thumb"},c.createElement("a",{href:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,target:"_blank"},c.createElement("img",{onClick:this.onClickExpandImage,onLoad:this.onMediaLoad,className:"post-image",src:l,style:{width:this.props.tn_w,height:this.props.tn_h,opacity:this.state.media_opacity}})))}return s?this.state.show_full_video?c.createElement("div",{style:{paddingLeft:"15px",display:"block",position:"static"},className:"video-container"},c.createElement("img",{onClick:this.onClickExpandVideo,onLoad:this.onMediaLoad,src:"/static/collapse.gif",alt:"[ - ]",title:"Collapse video",style:{marginLeft:"-15px",float:"left",display:"inline"}}),c.createElement("a",{href:"/player.php?v=/"+this.props.board+"/src/"+this.props.tim+this.props.ext+"&t="+this.props.filename+this.props.ext+"&loop=0",target:"_blank"},c.createElement("video",{src:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,loop:!1,style:{position:"static",pointerEvents:"inherit",display:"inline",maxWidth:"100%",maxHeight:"913px",opacity:this.state.media_opacity},controls:!0,autoPlay:!0},"Your browser does not support HTML5 video."))):c.createElement("div",{className:"video-container-thumb"},c.createElement("a",{href:"/player.php?v=/"+this.props.board+"/src/"+this.props.tim+this.props.ext+"&t="+this.props.filename+this.props.ext+"&loop=0",target:"_blank"},c.createElement("img",{onClick:this.onClickExpandVideo,onLoad:this.onMediaLoad,className:"post-image",src:"/"+this.props.board+"/thumb/"+this.props.tim+".jpg",style:{width:this.props.tn_w,height:this.props.tn_h,opacity:this.state.media_opacity}}))):i?this.state.show_full_audio?c.createElement("div",{style:{paddingLeft:"15px",display:"block",position:"static"},className:"audio-container"},c.createElement("img",{onClick:this.onClickExpandAudio,onLoad:this.onMediaLoad,src:"/static/collapse.gif",alt:"[ - ]",title:"Collapse Audio",style:{marginLeft:"-15px",float:"left",display:"inline"}}),c.createElement("a",{href:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,target:"_blank"},c.createElement("audio",{src:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,loop:!1,style:{position:"static",pointerEvents:"inherit",display:"inline",maxWidth:"100%",maxHeight:"913px",opacity:this.state.media_opacity},controls:!0,autoPlay:!0},"Your browser does not support HTML5 Audio"))):c.createElement("div",{className:"audio-container-thumb"},c.createElement("a",{href:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext,target:"_blank"},c.createElement("img",{onClick:this.onClickExpandAudio,onLoad:this.onMediaLoad,className:"post-image",src:"/static/kissu-audio.png",style:{width:200,height:200,opacity:this.state.media_opacity}}))):void 0}generateStagedEmbeding(){if(this.state.show_full_embed||"true"!=localStorage["fast-embed"]){var r={__html:this.props.embed};return c.createElement("div",{className:"embed-container"},c.createElement("img",{onClick:this.onClickExpandEmbed,src:"/static/collapse.gif",alt:"[ - ]",title:"Collapse Media",style:{marginLeft:"-15px",float:"left",display:"inline"}}),c.createElement("div",{dangerouslySetInnerHTML:r}))}return"thumb"==localStorage["embed-specific"]?c.createElement("div",{className:"embed-container-thumb"},c.createElement("a",{target:"_blank"},c.createElement("img",{onClick:this.onClickExpandEmbed,className:"post-image",src:"/static/kissu-embed.jpg",style:{width:200,height:200,cursor:"pointer"},alt:"Embed Thumb failed to load"}))):c.createElement("div",{className:"embed-container-thumb"},c.createElement("img",{onClick:this.onClickExpandEmbed,src:this.getEmbedThumb(this.getSRCFromIframe(this.props.embed)),className:"post-image",style:{width:270,height:202,cursor:"pointer"},alt:""}))}getEmbedThumb(r){let s;return(s=/(youtu\.be\/|youtube.com\/)([a-z0-9\-]{11})/gi.exec(r))?"https://img.youtube.com/vi/"+s[2]+"/mqdefault.jpg":(s=/(nicovideo\.jp\/watch\/sm)([0-9]{8})/gi.exec(r))?"https://nicovideo.cdn.nimg.jp/thumbnails/"+s[2]+"/"+s[2]+".L":"https://static.libsyn.com/p/assets/6/c/a/3/6ca38c2fefa1e989/WTF_-_new_larger_cover.jpg"}getSRCFromIframe(r){var s=r.match(/src=\".*?\"/gi);if(1==s.length){return s[0].replace('src="',"").replace('"',"").replace("embed/","").replace("embed.","")}return"URL not found"}triggerThreadRebuild(){this.props.threadReconstruct()}render(){var r={display:this.state.file_details_hidden?"none":"block"};return c.createElement("div",{"data-op":this.props.op_id,id:this.props.hierarchy_class+"_"+this.props.id,className:"post "+this.props.hierarchy_class+" "+(this.props.highlighted||window.location.hash=="#"+this.props.id?"highlighted":"")},this.props.filename&&"false"==localStorage["no-img"]&&this.generateProperMedia(),this.props.embed&&"false"==localStorage["no-img"]&&this.generateStagedEmbeding(),c.createElement("div",{className:"post-contents"},c.createElement("div",{className:"intro"},c.createElement("div",{className:"user"},c.createElement("label",{htmlFor:"delete_"+this.props.id}," ",c.createElement("input",{type:"checkbox",className:"delete",name:"delete_"+this.props.id,id:"delete_"+this.props.id}),this.props.sub&&c.createElement("span",{className:"subject"}," ",this.props.sub),this.parseEmailNameField(this.props.email,this.props.name,this.props.capcode)," ",c.createElement("time",{"data-utc":this.props.time},this.readableDate(this.props.time)," ",this.detailsExpander(!!this.props.filename,!!this.props.embed)," ",this.readableTime(this.props.time)))," ",c.createElement("a",{className:"post_no",id:"post_no_"+this.props.id,onClick:r=>{this.highlightReply(r,this.props.id)},href:"/"+this.props.board+"/res/"+this.props.op_id+"#"+this.props.id},"No."),c.createElement("a",{className:"post_no",style:{cursor:"pointer"},onClick:r=>{this.citeReply(this.props.id),r.preventDefault()}},this.props.id)," ",1==this.props.sticky&&c.createElement("i",{className:"fas fa-thumbtack fa-lg",title:"Sticky"}," "),1==this.props.locked&&c.createElement("i",{className:"fas fa-lock fa-lg",title:"Locked"}," "),1==this.props.cyclical&&c.createElement("i",{className:"fas fa-sync-alt fa-lg",title:"Cycle"}," "),1==this.props.sage&&c.createElement("i",{className:"fas fa-anchor fa-lg",title:"Sink"}," "),"op"==this.props.hierarchy_class&&this.props.paged&&c.createElement("span",{className:"reply-anchor"}," ",c.createElement("a",{href:"/"+this.props.board+"/res/"+this.props.id},"[Open]")),this.props.cites&&this.createCitesList(this.props.cites)),c.createElement("div",{className:"optional-file-info",style:r},this.props.filename&&"true"==localStorage["rev-img"]&&c.createElement("div",{className:"image-search"},"  ",this.createImageSearchLink("Google","https://www.google.com/searchbyimage?image_url=%s&safe=off"),"  ",this.createImageSearchLink("Yandex","https://yandex.com/images/search?rpt=imageview&url=%s"),"  ",this.createImageSearchLink("iqdb","https://iqdb.org/?url=%s"),"  ",this.createImageSearchLink("Trace","trace.moe/?auto&url=%s"),"  "),this.props.filename&&c.createElement("div",{className:"file"},c.createElement("span",{className:"fileinfo"},c.createElement("a",{href:"/"+this.props.board+"/src/"+this.props.tim+this.props.ext},c.createElement("span",{className:"postfilename",title:this.props.filename+this.props.ext},this.shortenFileName(this.props.filename)+this.props.ext))," ",c.createElement("span",{className:"unimportant"},"(",this.formatFileSize(this.props.fsize),","+this.props.h,"x"+this.props.w,")")," ")),this.props.embed&&c.createElement("div",{className:"embed-src"},c.createElement("span",{className:"embedinfo"},c.createElement("a",{href:this.getSRCFromIframe(this.props.embed),target:"_blank"},this.getSRCFromIframe(this.props.embed))," ")))),c.createElement("div",{className:"body"},this.props.com&&this.parsePostBodyIntoSafeJSX(this.props.com))),"op"==this.props.hierarchy_class&&(this.props.omitted_posts>0||this.props.expanded&&this.props.paged)&&c.createElement("div",{className:"omitted"},this.props.omitted_posts>0&&this.props.omitted_posts+" Replies Hidden ",c.createElement("a",{style:{cursor:"pointer"},onClick:r=>{this.triggerThreadRebuild(),r.preventDefault()}},this.props.omitted_posts>0?"[Expand]":"[Condense]")))}}s.Post=Post},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0));class ThreadUpdater extends c.Component{constructor(r){super(r),this.timer_increment=5,this.timer_repetitions=1,this.fireUpUpdater=this.fireUpUpdater.bind(this),this.state={timer_seconds:5}}componentDidMount(){this.timer=window.setInterval(()=>this.countDown(),1e3)}componentWillUnmount(){clearInterval(this.timer)}countDown(){0==this.state.timer_seconds?(console.log(this.timer_increment*this.timer_repetitions),this.timer_repetitions+=1,this.setState({timer_seconds:this.timer_increment*this.timer_repetitions}),this.fireUpUpdater()):this.setState({timer_seconds:this.state.timer_seconds-1})}fireUpUpdater(){this.props.threadListUpdateSignal(!0)}render(){return c.createElement("div",{id:"updater"},c.createElement("a",{onClick:()=>{this.setState({timer_seconds:this.timer_increment}),this.fireUpUpdater(),this.timer_repetitions=1},style:{cursor:"pointer"}},"[Update]")," ",c.createElement("span",{id:"timer"},"[ ",this.state.timer_seconds," ]"))}}s.ThreadUpdater=ThreadUpdater},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0)),u=i(2);class Page extends c.Component{constructor(r){super(r),this.count_of_all_threads_on_page=0,this.count_of_all_threads_mounted=0,this.setPageThreads=this.setPageThreads.bind(this),this.getPagedJSONData=this.getPagedJSONData.bind(this),this.returnThreadJSXObject=this.returnThreadJSXObject.bind(this),this.defineStateThreadsArray=this.defineStateThreadsArray.bind(this),this.maintainCountOfAllThreads=this.maintainCountOfAllThreads.bind(this),this.state={spaced_threads:[],error:null}}componentDidMount(){this.setPageThreads()}maintainCountOfAllThreads(){this.count_of_all_threads_mounted++,this.count_of_all_threads_mounted==this.count_of_all_threads_on_page&&this.props.finishedCallBackFunction()}setPageThreads(){this.getPagedJSONData(this.props.board,this.props.page).then(r=>{var s=JSON.parse(r).threads;if(s.length>=this.props.page-1){var i=[];s.forEach((r,s)=>{i.push(this.returnThreadJSXObject(r.posts,s))}),this.count_of_all_threads_on_page=i.length,this.count_of_all_threads_mounted=0,this.setState({spaced_threads:[]}),this.defineStateThreadsArray(i)}else this.setState({error:"Page out of bounds"})}).catch(r=>{console.log(r),this.setState({error:r+"\nJSON fetch error"})})}threadQuickReply(r,s){}returnThreadJSXObject(r,s){var i={board:this.props.board,thread_id:r[0].no,paged:r,threadQuickReply:this.threadQuickReply,finishedCallBackFunction:this.maintainCountOfAllThreads};return c.createElement(u.Thread,Object.assign({},i,{key:3*s}))}defineStateThreadsArray(r){for(var s=0;s<r.length;s++)this.setState({spaced_threads:[...this.state.spaced_threads,r[s]]}),this.setState({spaced_threads:[...this.state.spaced_threads,c.createElement("br",{className:"clear",key:3*s-1})]}),this.setState({spaced_threads:[...this.state.spaced_threads,c.createElement("hr",{key:3*s-2})]})}getPagedJSONData(r,s){return new Promise((i,l)=>{var c=new XMLHttpRequest;c.addEventListener("load",(function(r){this.status>=400||this.status>=300?l(this.status):i(this.response)})),c.addEventListener("error",(function(r){l(this.status)})),c.open("GET",`/${r}/${s-1}.json`),c.send()})}render(){return this.state.error?c.createElement("p",null,this.state.error):c.createElement("div",{id:"page-"+this.props.page+"-container",className:"page-container"},this.state.spaced_threads)}}s.Page=Page},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0));class DeleteButton extends c.Component{constructor(r){super(r)}render(){return c.createElement("div",{className:"delete-container"},c.createElement("strong",null,"Delete Selected Posts"),c.createElement("br",null),c.createElement("label",null,"Password: ",c.createElement("input",{name:"pswrd",type:"password",value:localStorage.pswrd})),c.createElement("br",null),c.createElement("label",null,"Delete Media Only: ",c.createElement("input",{type:"checkbox",name:"file"})),c.createElement("br",null),c.createElement("input",{type:"submit",name:"delete",value:"delete"}))}}s.DeleteButton=DeleteButton},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const c=l(i(0));class ReportButton extends c.Component{constructor(r){super(r)}render(){return c.createElement("div",{className:"report-container"},c.createElement("strong",null,"Report Selected Posts"),c.createElement("br",null),c.createElement("label",null,"Reason: ",c.createElement("input",{name:"reason",type:"text"})),c.createElement("br",null),c.createElement("input",{type:"submit",name:"report",value:"Report"}))}}s.ReportButton=ReportButton},function(r,s,i){"use strict";var l=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s},c=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0});const u=l(i(0)),h=c(i(13));class OptionMenu extends u.Component{constructor(r){super(r),this.state={show_menu:!1,grab_pointer:"grab",toggle_options:!1},this.toggleShowMenu=this.toggleShowMenu.bind(this),this.setOptionLocalStore=this.setOptionLocalStore.bind(this),null==localStorage["fast-embed"]&&(localStorage["fast-embed"]="true"),null==localStorage["embed-specific"]&&(localStorage["embed-specific"]="source"),null==localStorage["file-info"]&&(localStorage["file-info"]="false"),null==localStorage["rev-img"]&&(localStorage["rev-img"]="true"),null==localStorage["no-img"]&&(localStorage["no-img"]="false"),null==localStorage["auto-up"]&&(localStorage["auto-up"]="true")}toggleShowMenu(){this.setState({show_menu:!this.state.show_menu})}setOptionLocalStore(r){switch(r.target.name){case"fast-embed":localStorage.setItem("fast-embed",""+r.target.checked);break;case"embed-specific":localStorage.setItem("embed-specific",r.target.value);break;case"file-info":localStorage.setItem("file-info",""+r.target.checked);break;case"rev-img":localStorage.setItem("rev-img",""+r.target.checked);break;case"no-img":localStorage.setItem("no-img",""+r.target.checked);break;case"auto-up":localStorage.setItem("auto-up",""+r.target.checked)}this.setState({toggle_options:!this.state.toggle_options}),this.props.optionSetCallBack()}render(){return u.createElement("span",{className:"options-container"},u.createElement("a",{onClick:this.toggleShowMenu,style:{cursor:"pointer"}},"[ Options ]"),this.state.show_menu&&u.createElement(h.default,{handle:".handle"},u.createElement("div",{id:"options-menu"},u.createElement("div",{className:"handle",onMouseDown:r=>this.setState({grab_pointer:"grabbing"}),onMouseUp:r=>this.setState({grab_pointer:"grab"}),style:{cursor:this.state.grab_pointer}},u.createElement("strong",{unselectable:"on"},"Page Options"),u.createElement("a",{className:"close-options",onClick:this.toggleShowMenu},"X"),u.createElement("hr",null)),u.createElement("div",{id:"option-input-container"},u.createElement("strong",null,"Embedding")," ",u.createElement("br",null)," ",u.createElement("label",null,u.createElement("input",{type:"checkbox",name:"fast-embed",onClick:this.setOptionLocalStore,defaultChecked:"true"==localStorage["fast-embed"]}),"Fast Video Embedding"),u.createElement("br",null),"  ",u.createElement("label",null,u.createElement("input",{type:"radio",name:"embed-specific",value:"source",onClick:this.setOptionLocalStore,defaultChecked:"source"==localStorage["embed-specific"],disabled:"false"==localStorage["fast-embed"]}),"Source Thumbnails"),u.createElement("br",null),"  ",u.createElement("label",null,u.createElement("input",{type:"radio",name:"embed-specific",value:"thumb",onClick:this.setOptionLocalStore,defaultChecked:"thumb"==localStorage["embed-specific"],disabled:"false"==localStorage["fast-embed"]}),"Kissu Thumbnails"),u.createElement("br",null),u.createElement("hr",null),u.createElement("strong",null,"File Options")," ",u.createElement("br",null)," ",u.createElement("label",null,u.createElement("input",{name:"file-info",type:"checkbox",onClick:this.setOptionLocalStore,defaultChecked:"true"==localStorage["file-info"]}),"Show file info by default"),u.createElement("br",null)," ",u.createElement("label",null,u.createElement("input",{name:"rev-img",type:"checkbox",onClick:this.setOptionLocalStore,defaultChecked:"true"==localStorage["rev-img"]}),"Show reverse image search"),u.createElement("br",null)," ",u.createElement("label",null,u.createElement("input",{name:"no-img",type:"checkbox",onClick:this.setOptionLocalStore,defaultChecked:"true"==localStorage["no-img"]}),"Remove images from page load"),u.createElement("br",null),u.createElement("hr",null),u.createElement("strong",null,"Auto Updater Options")," ",u.createElement("br",null)," ",u.createElement("label",null,u.createElement("input",{name:"auto-up",type:"checkbox",onClick:this.setOptionLocalStore,defaultChecked:"true"==localStorage["auto-up"]}),"Enable thread auto-updates"),u.createElement("br",null),u.createElement("hr",null),u.createElement("hr",null)))))}}s.OptionMenu=OptionMenu},function(r,s,i){var l,c;window,r.exports=(l=i(0),c=i(1),function(r){var s={};function n(i){if(s[i])return s[i].exports;var l=s[i]={i:i,l:!1,exports:{}};return r[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=r,n.c=s,n.d=function(r,s,i){n.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:i})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,s){if(1&s&&(r=n(r)),8&s)return r;if(4&s&&"object"==typeof r&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&s&&"string"!=typeof r)for(var l in r)n.d(i,l,function(s){return r[s]}.bind(null,l));return i},n.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(s,"a",s),s},n.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},n.p="",n(n.s=4)}([function(r,s,i){r.exports=i(5)()},function(r,s){r.exports=l},function(r,s){r.exports=c},function(r,s,i){var l;!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var r=[],s=0;s<arguments.length;s++){var l=arguments[s];if(l){var c=typeof l;if("string"===c||"number"===c)r.push(l);else if(Array.isArray(l)&&l.length){var u=o.apply(null,l);u&&r.push(u)}else if("object"===c)for(var h in l)i.call(l,h)&&l[h]&&r.push(h)}}return r.join(" ")}r.exports?(o.default=o,r.exports=o):void 0===(l=function(){return o}.apply(s,[]))||(r.exports=l)}()},function(r,s,i){var l=i(7),c=l.default,u=l.DraggableCore;r.exports=c,r.exports.default=c,r.exports.DraggableCore=u},function(r,s,i){"use strict";var l=i(6);function o(){}function a(){}a.resetWarningCache=o,r.exports=function(){function t(r,s,i,c,u,h){if(h!==l){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}function e(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},function(r,s,i){"use strict";r.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(r,s,i){"use strict";i.r(s);var l=i(1),c=i.n(l),u=i(0),h=i.n(u),m=i(2),O=i.n(m),F=i(3),J=i.n(F);function f(r,s){for(var i=0,l=r.length;i<l;i++)if(s.apply(s,[r[i],i,r]))return r[i]}function p(r){return"function"==typeof r||"[object Function]"===Object.prototype.toString.call(r)}function d(r){return"number"==typeof r&&!isNaN(r)}function g(r){return parseInt(r,10)}function y(r,s,i){if(r[s])return new Error("Invalid prop ".concat(s," passed to ").concat(i," - do not set this, set it on the child."))}var z=["Moz","Webkit","O","ms"];function b(r,s){return s?"".concat(s).concat(function(r){for(var s="",i=!0,l=0;l<r.length;l++)i?(s+=r[l].toUpperCase(),i=!1):"-"===r[l]?i=!0:s+=r[l];return s}(r)):r}var ee=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var s=window.document.documentElement.style;if(r in s)return"";for(var i=0;i<z.length;i++)if(b(r,z[i])in s)return z[i];return""}();function v(r,s){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);s&&(l=l.filter((function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),i.push.apply(i,l)}return i}function w(r,s,i){return s in r?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i,r}var te="";function S(r,s){return te||(te=f(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(s){return p(r[s])}))),!!p(r[te])&&r[te](s)}function D(r,s,i){var l=r;do{if(S(l,s))return!0;if(l===i)return!1;l=l.parentNode}while(l);return!1}function x(r,s,i){r&&(r.attachEvent?r.attachEvent("on"+s,i):r.addEventListener?r.addEventListener(s,i,!0):r["on"+s]=i)}function P(r,s,i){r&&(r.detachEvent?r.detachEvent("on"+s,i):r.removeEventListener?r.removeEventListener(s,i,!0):r["on"+s]=null)}function j(r){var s=r.clientHeight,i=r.ownerDocument.defaultView.getComputedStyle(r);return(s+=g(i.borderTopWidth))+g(i.borderBottomWidth)}function E(r){var s=r.clientWidth,i=r.ownerDocument.defaultView.getComputedStyle(r);return(s+=g(i.borderLeftWidth))+g(i.borderRightWidth)}function T(r){var s=r.clientHeight,i=r.ownerDocument.defaultView.getComputedStyle(r);return(s-=g(i.paddingTop))-g(i.paddingBottom)}function N(r){var s=r.clientWidth,i=r.ownerDocument.defaultView.getComputedStyle(r);return(s-=g(i.paddingLeft))-g(i.paddingRight)}function C(r,s,i){var l=r.x,c=r.y,u="translate(".concat(l).concat(i,",").concat(c).concat(i,")");if(s){var h="".concat("string"==typeof s.x?s.x:s.x+i),m="".concat("string"==typeof s.y?s.y:s.y+i);u="translate(".concat(h,", ").concat(m,")")+u}return u}function M(r){if(r){var s,i,l=r.getElementById("react-draggable-style-el");l||((l=r.createElement("style")).type="text/css",l.id="react-draggable-style-el",l.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",l.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",r.getElementsByTagName("head")[0].appendChild(l)),r.body&&(i="react-draggable-transparent-selection",(s=r.body).classList?s.classList.add(i):s.className.match(new RegExp("(?:^|\\s)".concat(i,"(?!\\S)")))||(s.className+=" ".concat(i)))}}function k(r){try{r&&r.body&&(s=r.body,i="react-draggable-transparent-selection",s.classList?s.classList.remove(i):s.className=s.className.replace(new RegExp("(?:^|\\s)".concat(i,"(?!\\S)"),"g"),"")),r.selection?r.selection.empty():window.getSelection().removeAllRanges()}catch(r){}var s,i}function _(){return function(r){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?v(i,!0).forEach((function(s){w(r,s,i[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):v(i).forEach((function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(i,s))}))}return r}({touchAction:"none"},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function X(r){return"both"===r.props.axis||"x"===r.props.axis}function Y(r){return"both"===r.props.axis||"y"===r.props.axis}function L(r,s,i){var l="number"==typeof s?function(r,s){return r.targetTouches&&f(r.targetTouches,(function(r){return s===r.identifier}))||r.changedTouches&&f(r.changedTouches,(function(r){return s===r.identifier}))}(r,s):null;if("number"==typeof s&&!l)return null;var c=I(i);return function(r,s,i){var l=s===s.ownerDocument.body?{left:0,top:0}:s.getBoundingClientRect();return{x:(r.clientX+s.scrollLeft-l.left)/i,y:(r.clientY+s.scrollTop-l.top)/i}}(l||r,i.props.offsetParent||c.offsetParent||c.ownerDocument.body,i.props.scale)}function R(r,s,i){var l=r.state,c=!d(l.lastX),u=I(r);return c?{node:u,deltaX:0,deltaY:0,lastX:s,lastY:i,x:s,y:i}:{node:u,deltaX:s-l.lastX,deltaY:i-l.lastY,lastX:l.lastX,lastY:l.lastY,x:s,y:i}}function A(r,s){var i=r.props.scale;return{node:s.node,x:r.state.x+s.deltaX/i,y:r.state.y+s.deltaY/i,deltaX:s.deltaX/i,deltaY:s.deltaY/i,lastX:r.state.x,lastY:r.state.y}}function I(r){var s=O.a.findDOMNode(r);if(!s)throw new Error("<DraggableCore>: Unmounted during event!");return s}function U(r){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function V(r,s){return function(r){if(Array.isArray(r))return r}(r)||function(r,s){var i=[],l=!0,c=!1,u=void 0;try{for(var h,m=r[Symbol.iterator]();!(l=(h=m.next()).done)&&(i.push(h.value),!s||i.length!==s);l=!0);}catch(r){c=!0,u=r}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}return i}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(r,s){for(var i=0;i<s.length;i++){var l=s[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function B(r){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function H(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function q(r,s){return(q=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r})(r,s)}function G(r,s,i){return s in r?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i,r}var re={start:"touchstart",move:"touchmove",stop:"touchend"},ae={start:"mousedown",move:"mousemove",stop:"mouseup"},ne=ae,oe=function(r){function e(){var r,s,i,l;!function(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return i=this,l=(r=B(e)).call.apply(r,[this].concat(u)),s=!l||"object"!==U(l)&&"function"!=typeof l?H(i):l,G(H(s),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),G(H(s),"handleDragStart",(function(r){if(s.props.onMouseDown(r),!s.props.allowAnyClick&&"number"==typeof r.button&&0!==r.button)return!1;var i=O.a.findDOMNode(H(s));if(!i||!i.ownerDocument||!i.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var l=i.ownerDocument;if(!(s.props.disabled||!(r.target instanceof l.defaultView.Node)||s.props.handle&&!D(r.target,s.props.handle,i)||s.props.cancel&&D(r.target,s.props.cancel,i))){var c=function(r){return r.targetTouches&&r.targetTouches[0]?r.targetTouches[0].identifier:r.changedTouches&&r.changedTouches[0]?r.changedTouches[0].identifier:void 0}(r);s.setState({touchIdentifier:c});var u=L(r,c,H(s));if(null!=u){var h=u.x,m=u.y,F=R(H(s),h,m);s.props.onStart,!1!==s.props.onStart(r,F)&&(s.props.enableUserSelectHack&&M(l),s.setState({dragging:!0,lastX:h,lastY:m}),x(l,ne.move,s.handleDrag),x(l,ne.stop,s.handleDragStop))}}})),G(H(s),"handleDrag",(function(r){"touchmove"===r.type&&r.preventDefault();var i=L(r,s.state.touchIdentifier,H(s));if(null!=i){var l,c,u,h=i.x,m=i.y;if(Array.isArray(s.props.grid)){var O=h-s.state.lastX,F=m-s.state.lastY,J=V((l=s.props.grid,c=O,u=F,[Math.round(c/l[0])*l[0],Math.round(u/l[1])*l[1]]),2);if(O=J[0],F=J[1],!O&&!F)return;h=s.state.lastX+O,m=s.state.lastY+F}var z=R(H(s),h,m);if(!1!==s.props.onDrag(r,z))s.setState({lastX:h,lastY:m});else try{s.handleDragStop(new MouseEvent("mouseup"))}catch(r){var ee=document.createEvent("MouseEvents");ee.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.handleDragStop(ee)}}})),G(H(s),"handleDragStop",(function(r){if(s.state.dragging){var i=L(r,s.state.touchIdentifier,H(s));if(null!=i){var l=i.x,c=i.y,u=R(H(s),l,c),h=O.a.findDOMNode(H(s));h&&s.props.enableUserSelectHack&&k(h.ownerDocument),s.setState({dragging:!1,lastX:NaN,lastY:NaN}),s.props.onStop(r,u),h&&(P(h.ownerDocument,ne.move,s.handleDrag),P(h.ownerDocument,ne.stop,s.handleDragStop))}}})),G(H(s),"onMouseDown",(function(r){return ne=ae,s.handleDragStart(r)})),G(H(s),"onMouseUp",(function(r){return ne=ae,s.handleDragStop(r)})),G(H(s),"onTouchStart",(function(r){return ne=re,s.handleDragStart(r)})),G(H(s),"onTouchEnd",(function(r){return ne=re,s.handleDragStop(r)})),s}var s,i;return function(r,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),s&&q(r,s)}(e,c.a.Component),s=e,(i=[{key:"componentWillUnmount",value:function(){var r=O.a.findDOMNode(this);if(r){var s=r.ownerDocument;P(s,ae.move,this.handleDrag),P(s,re.move,this.handleDrag),P(s,ae.stop,this.handleDragStop),P(s,re.stop,this.handleDragStop),this.props.enableUserSelectHack&&k(s)}}},{key:"render",value:function(){return c.a.cloneElement(c.a.Children.only(this.props.children),{style:_(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&W(s.prototype,i),e}();function K(r){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function Q(){return(Q=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l])}return r}).apply(this,arguments)}function tt(r,s){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);s&&(l=l.filter((function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),i.push.apply(i,l)}return i}function et(r){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?tt(i,!0).forEach((function(s){st(r,s,i[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):tt(i).forEach((function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(i,s))}))}return r}function nt(r){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function rt(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ot(r,s){for(var i=0;i<s.length;i++){var l=s[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function at(r,s,i){return s&&ot(r.prototype,s),i&&ot(r,i),r}function it(r,s){return(it=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r})(r,s)}function st(r,s,i){return s in r?Object.defineProperty(r,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[s]=i,r}G(oe,"displayName","DraggableCore"),G(oe,"propTypes",{allowAnyClick:h.a.bool,disabled:h.a.bool,enableUserSelectHack:h.a.bool,offsetParent:function(r,s){if(r[s]&&1!==r[s].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:h.a.arrayOf(h.a.number),handle:h.a.string,cancel:h.a.string,onStart:h.a.func,onDrag:h.a.func,onStop:h.a.func,onMouseDown:h.a.func,scale:h.a.number,className:y,style:y,transform:y}),G(oe,"defaultProps",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),i.d(s,"default",(function(){return se})),i.d(s,"DraggableCore",(function(){return oe}));var se=function(r){function e(r){var s,i;return function(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e),i=nt(e).call(this,r),s=!i||"object"!==K(i)&&"function"!=typeof i?rt(this):i,st(rt(s),"onDragStart",(function(r,i){if(!1===s.props.onStart(r,A(rt(s),i)))return!1;s.setState({dragging:!0,dragged:!0})})),st(rt(s),"onDrag",(function(r,i){if(!s.state.dragging)return!1;var l=A(rt(s),i),c={x:l.x,y:l.y};if(s.props.bounds){var u=c.x,h=c.y;c.x+=s.state.slackX,c.y+=s.state.slackY;var m=function $(r,s){return function(r){if(Array.isArray(r))return r}(r)||function(r,s){var i=[],l=!0,c=!1,u=void 0;try{for(var h,m=r[Symbol.iterator]();!(l=(h=m.next()).done)&&(i.push(h.value),!s||i.length!==s);l=!0);}catch(r){c=!0,u=r}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}return i}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(function(r,s,i){if(!r.props.bounds)return[s,i];var l=r.props.bounds;l="string"==typeof l?l:function(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}}(l);var c=I(r);if("string"==typeof l){var u,h=c.ownerDocument,m=h.defaultView;if(!((u="parent"===l?c.parentNode:h.querySelector(l))instanceof m.HTMLElement))throw new Error('Bounds selector "'+l+'" could not find an element.');var O=m.getComputedStyle(c),F=m.getComputedStyle(u);l={left:-c.offsetLeft+g(F.paddingLeft)+g(O.marginLeft),top:-c.offsetTop+g(F.paddingTop)+g(O.marginTop),right:N(u)-E(c)-c.offsetLeft+g(F.paddingRight)-g(O.marginRight),bottom:T(u)-j(c)-c.offsetTop+g(F.paddingBottom)-g(O.marginBottom)}}return d(l.right)&&(s=Math.min(s,l.right)),d(l.bottom)&&(i=Math.min(i,l.bottom)),d(l.left)&&(s=Math.max(s,l.left)),d(l.top)&&(i=Math.max(i,l.top)),[s,i]}(rt(s),c.x,c.y),2),O=m[0],F=m[1];c.x=O,c.y=F,c.slackX=s.state.slackX+(u-c.x),c.slackY=s.state.slackY+(h-c.y),l.x=c.x,l.y=c.y,l.deltaX=c.x-s.state.x,l.deltaY=c.y-s.state.y}if(!1===s.props.onDrag(r,l))return!1;s.setState(c)})),st(rt(s),"onDragStop",(function(r,i){if(!s.state.dragging)return!1;if(!1===s.props.onStop(r,A(rt(s),i)))return!1;var l={dragging:!1,slackX:0,slackY:0};if(Boolean(s.props.position)){var c=s.props.position,u=c.x,h=c.y;l.x=u,l.y=h}s.setState(l)})),s.state={dragging:!1,dragged:!1,x:r.position?r.position.x:r.defaultPosition.x,y:r.position?r.position.y:r.defaultPosition.y,prevPropsPosition:et({},r.position),slackX:0,slackY:0,isElementSVG:!1},!r.position||r.onDrag||r.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),s}return function(r,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),s&&it(r,s)}(e,c.a.Component),at(e,null,[{key:"getDerivedStateFromProps",value:function(r,s){var i=r.position,l=s.prevPropsPosition;return!i||l&&i.x===l.x&&i.y===l.y?null:{x:i.x,y:i.y,prevPropsPosition:et({},i)}}}]),at(e,[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&O.a.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var r,s=this.props,i=(s.axis,s.bounds,s.children),l=s.defaultPosition,u=s.defaultClassName,h=s.defaultClassNameDragging,m=s.defaultClassNameDragged,O=s.position,F=s.positionOffset,z=(s.scale,function Z(r,s){if(null==r)return{};var i,l,c=function(r,s){if(null==r)return{};var i,l,c={},u=Object.keys(r);for(l=0;l<u.length;l++)i=u[l],s.indexOf(i)>=0||(c[i]=r[i]);return c}(r,s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(l=0;l<u.length;l++)i=u[l],s.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(r,i)&&(c[i]=r[i])}return c}(s,["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"])),te={},re=null,ae=!Boolean(O)||this.state.dragging,ne=O||l,se={x:X(this)&&ae?this.state.x:ne.x,y:Y(this)&&ae?this.state.y:ne.y};this.state.isElementSVG?re=function(r,s){return C(r,s,"")}(se,F):te=function(r,s){var i=C(r,s,"px");return w({},b("transform",ee),i)}(se,F);var ie=J()(i.props.className||"",u,(st(r={},h,this.state.dragging),st(r,m,this.state.dragged),r));return c.a.createElement(oe,Q({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),c.a.cloneElement(c.a.Children.only(i),{className:ie,style:et({},i.props.style,{},te),transform:re}))}}]),e}();st(se,"displayName","Draggable"),st(se,"propTypes",et({},oe.propTypes,{axis:h.a.oneOf(["both","x","y","none"]),bounds:h.a.oneOfType([h.a.shape({left:h.a.number,right:h.a.number,top:h.a.number,bottom:h.a.number}),h.a.string,h.a.oneOf([!1])]),defaultClassName:h.a.string,defaultClassNameDragging:h.a.string,defaultClassNameDragged:h.a.string,defaultPosition:h.a.shape({x:h.a.number,y:h.a.number}),positionOffset:h.a.shape({x:h.a.oneOfType([h.a.number,h.a.string]),y:h.a.oneOfType([h.a.number,h.a.string])}),position:h.a.shape({x:h.a.number,y:h.a.number}),className:y,style:y,transform:y})),st(se,"defaultProps",et({},oe.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}))}]))},function(r,s,i){"use strict";var l=this&&this.__awaiter||function(r,s,i,l){return new(i||(i=Promise))((function(c,u){function fulfilled(r){try{step(l.next(r))}catch(r){u(r)}}function rejected(r){try{step(l.throw(r))}catch(r){u(r)}}function step(r){r.done?c(r.value):function adopt(r){return r instanceof i?r:new i((function(s){s(r)}))}(r.value).then(fulfilled,rejected)}step((l=l.apply(r,s||[])).next())}))},c=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var i in r)Object.hasOwnProperty.call(r,i)&&(s[i]=r[i]);return s.default=r,s};Object.defineProperty(s,"__esModule",{value:!0});const u=c(i(0));class NavButtons extends u.Component{constructor(r){super(r),this.state={paged:!1,board:""},this.checkThreadUpdates=this.checkThreadUpdates.bind(this),this.fetchThreadTimeJSON=this.fetchThreadTimeJSON.bind(this)}componentDidMount(){this.checkThreadUpdates()}checkThreadUpdates(){return l(this,void 0,void 0,(function*(){this.fetchThreadTimeJSON(this.props.board).then(r=>{let s=JSON.parse(r),i=0;s[0].threads.forEach((function(r){r.last_modified>i&&(i=r.last_modified)}));let l="";console.log((Date.now()/1e3-i)/86400),console.log(Date.now()/1e3-i),l=(Date.now()/1e3-i)/31104e3>1?Math.floor(Date.now()/1e3-i/31104e3)+" year":(Date.now()/1e3-i)/2592e3>1?Math.floor((Date.now()/1e3-i)/2592e3)+" month":(Date.now()/1e3-i)/86400>1?Math.floor((Date.now()/1e3-i)/86400)+" day":(Date.now()/1e3-i)/3600>1?Math.floor((Date.now()/1e3-i)/3600)+" hour":(Date.now()/1e3-i)/60>1?Math.floor((Date.now()/1e3-i)/60)+" minute":Math.floor(Date.now()/1e3-i)+" second",(l.substring(0,l.indexOf(" ")).length>1||parseInt(l[0])>1)&&(l+="s"),console.log(l),this.props.confirmUpdateClick(l,i)}).catch(r=>{console.log(r)})}))}fetchThreadTimeJSON(r){return console.log("f"),new Promise((s,i)=>{var l=new XMLHttpRequest;l.addEventListener("load",(function(r){this.status>=300?i(this.status):s(this.response)})),l.addEventListener("error",(function(r){i(this.status)})),l.open("GET",`/${r}/threads.json`),l.send()})}render(){return u.createElement("span",{className:"nav-links"},!this.props.paged&&u.createElement("a",{href:"/"+this.props.board+"/",className:"return"},"[Return]")," ",this.props.paged&&u.createElement("a",{title:"Click to Update",style:{cursor:"pointer",textDecoration:"none"},className:"index-updater",onClick:this.checkThreadUpdates},"[",this.props.time_string,"]")," ",u.createElement("a",{href:"/"+this.props.board+"/catalog"},"[Catalog]")," ",u.createElement("a",{href:"archive"},"[Archive]")," ")}}s.NavButtons=NavButtons}]);
//# sourceMappingURL=ui-bundle(0.1).js.map